function InitHeroTheAlliance takes nothing returns nothing
    if (GetUnitCountDone(ILLIDAN_BONUS_HERO) > 0) then
        set hero_id = ILLIDAN_BONUS_HERO
    endif
	if (GetUnitCountDone(LADY_VASHJ_BONUS_HERO) > 0) then
        set hero_id2 = LADY_VASHJ_BONUS_HERO
	endif
	if (GetUnitCountDone(KAEL_BONUS_HERO) > 0) then
		set hero_id3 = KAEL_BONUS_HERO
    endif
endfunction

function BuildingStrategy takes nothing returns nothing
    // **********************************
    // *      Building Strategy         *
    // **********************************
    // Tier 1 Buildings
	call SetReplacements( 1, 2, 3 )
	call SetBuildUnit( 1, NAGA_TEMPLE_1 )
	call SetBuildUnit( 22, NAGA_SLAVE )
	call SetBuildUnit( 2, NAGA_CITIZEN_MALE )

	call BuildingStrategyStandardTier1()

	call SetBuildUnit( 5, NAGA_CORAL )
	call SetBuildUnit( 2, NAGA_HOUSING )
	call SetBuildUnit( 2, NAGA_SPAWNING )
	call SetBuildUnit( 1, NAGA_ALTAR )
	call SetBuildUnit( 1, NAGA_MURLOC_HUT )
	call SetBuildUnit( 1, NAGA_FISH_MARKET )

    call SetBuildUnit( 1, BLOOD_ELF_TOWN_HALL )
	call SetBuildUnit( 17, BLOOD_PEASANT )
	call SetBuildUnit( 2, BLOOD_ELF_CITIZEN_MALE )
	call SetBuildUnit( 3, HOUSE )
	call SetBuildUnit( 2, BLOOD_ELF_HOUSING )
	call SetBuildUnit( 2, BLOOD_ELF_BARRACKS )
	call SetBuildUnit( 1, HUMAN_ALTAR )
	call SetBuildUnit( 1, BLOOD_ELF_LUMBER_MILL )
	call SetBuildUnit( 1, BLOOD_ELF_BLACK_SMITH )
	call SetBuildUnit( 1, BLOOD_ELF_ARCANE_VAULT )

	call SetBuildUpgr( 1, UPG_NAGA_ARMOR )
	call SetBuildUpgr( 1, UPG_NAGA_ATTACK )

	call SetBuildUpgr( 1, UPG_DEFEND )
	call SetBuildUpgr( 1, UPG_BLOOD_ELF_MELEE )
	call SetBuildUpgr( 1, UPG_BLOOD_ELF_ARMOR )
	call SetBuildUpgr( 1, UPG_BLOOD_ELF_LEATHER )
	call SetBuildUpgr( 1, UPG_BLOOD_ELF_MOON_ARMOR )
	call SetBuildUpgr( 1, UPG_BLOOD_ELF_STR_MOON )
	call SetBuildUpgr( 1, UPG_BLOOD_ELF_MASONRY )

    // Tier 2 buildings
    call SetBuildUnit( 1, NAGA_TEMPLE )
	call SetBuildUnit( 1, NAGA_MURLOC_HUT )
	call SetBuildUnit( 1, NAGA_SHRINE )
	call SetBuildUnit( 2, NAGA_CITIZEN_FEMALE )

    call SetBuildUnit( 1, BLOOD_ELF_KEEP )
	call SetBuildUnit( 1, BLOOD_ELF_LUMBER_MILL )
	call SetBuildUnit( 1, BLOOD_ELF_BLACK_SMITH )
	call SetBuildUnit( 1, BLOOD_ELF_ARCANE_SACNTUM )
	call SetBuildUnit( 4, HOUSE )
	call SetBuildUnit( 2, BLOOD_ELF_SCOUT_TOWER )
	call SetBuildUnit( 2, BLOOD_ELF_CITIZEN_FEMALE )

	call SetBuildUpgr( 2, UPG_NAGA_ARMOR )
	call SetBuildUpgr( 2, UPG_NAGA_ATTACK )
	call SetBuildUpgr( 1, UPG_NAGA_SUBMERGE )
	call SetBuildUpgr( 1, UPG_NAGA_BACKPACK )
	call SetBuildUpgr( 1, UPG_NAGA_ABOLISH )

	call SetBuildUpgr( 2, UPG_BLOOD_ELF_MELEE )
	call SetBuildUpgr( 2, UPG_BLOOD_ELF_ARMOR )
	call SetBuildUpgr( 2, UPG_BLOOD_ELF_LEATHER )
	call SetBuildUpgr( 2, UPG_BLOOD_ELF_MOON_ARMOR )
	call SetBuildUpgr( 2, UPG_BLOOD_ELF_STR_MOON )
	call SetBuildUpgr( 1, UPG_BLOOD_ELF_WOOD )
	call SetBuildUpgr( 2, UPG_BLOOD_ELF_MASONRY )
	call SetBuildUpgr( 1, UPG_BLOOD_ELF_PRAYING )
	call SetBuildUpgr( 1, UPG_SORCERY )
	call SetBuildUpgr( 1, UPG_BLOOD_ELF_BOWS )

    // Tier 3 buildings
    call SetBuildUnit( 1, NAGA_TEMPLE_3 )
	call SetBuildUnit( 3, NAGA_GUARDIAN )

	call SetBuildUnit( 1, BLOOD_ELF_CASTLE )
	call SetBuildUnit( 5, HOUSE )
	call SetBuildUnit( 1, ELF_GUARD_TOWER )
	call SetBuildUnit( 1, ARCANE_TOWER )
	call SetBuildUnit( 1, BLOOD_ELF_WORKSHOP )

	call SetBuildUpgr( 3, UPG_NAGA_ARMOR )
	call SetBuildUpgr( 3, UPG_NAGA_ATTACK )
	call SetBuildUpgr( 2, UPG_NAGA_ABOLISH )
	call SetBuildUpgr( 2, UPG_SIREN )
	call SetBuildUpgr( 1, UPG_NAGA_ENSNARE )
    //call SetBuildUpgr( 1, UPG_STATUE_OF_AZSHARA )
	//call SetBuildUnit( 1, NAGA_STATUE_OF_ASZHARA )


	call SetBuildUpgr( 2, UPG_BLOOD_ELF_WOOD )
	call SetBuildUpgr( 3, UPG_BLOOD_ELF_MELEE )
	call SetBuildUpgr( 3, UPG_BLOOD_ELF_ARMOR )
	call SetBuildUpgr( 3, UPG_BLOOD_ELF_LEATHER )
	call SetBuildUpgr( 3, UPG_BLOOD_ELF_MOON_ARMOR )
	call SetBuildUpgr( 3, UPG_BLOOD_ELF_STR_MOON )
	call SetBuildUpgr( 3, UPG_BLOOD_ELF_MASONRY )
	call SetBuildUpgr( 2, UPG_BLOOD_ELF_PRAYING )
	call SetBuildUpgr( 2, UPG_SORCERY )
	call SetBuildUpgr( 3, UPG_BLOOD_ELF_IMPROVED_SIEGE )
	call SetBuildUpgr( 1, UPG_BLOOD_ELF_BURNING_OIL )
	call SetBuildUpgr( 1, UPG_BLOOD_ELF_BREEDING )
	call SetBuildUpgr( 1, UPG_BLOOD_ELF_MARKSMAN )
	call SetBuildUpgr( 1, UPG_CONT_MAGIC )
	call SetBuildUpgr( 1, UPG_SENTINEL )
	call SetBuildUpgr( 1, UPG_CLOUD )
	//call SetBuildUpgr( 1, UPG_BLOOD_ELF_MAGIC_VAULT )
	//call SetBuildUnit( 1, BLOOD_ELF_MAGIC_VAULT )

	call BuildingStrategyStandardTier3()

	//call CampaignDefenderEx( 2, 4, 6, HUMAN_BATTLESHIP )

    // **********************************
    // *    End Building Strategy       *
    // **********************************
endfunction

function AddStandardUnitsToAttackWaveTheAlliance takes nothing returns nothing
	call PurchaseZeppelin()
	call AttackWithMount()
    call CampaignAttacker( 0, 1, hero_id )
    call CampaignAttacker( 0, 1, hero_id2 )
    call CampaignAttacker( 0, 1, hero_id3 )
endfunction

function AttackWaves takes nothing returns nothing
    //*** WAVE 1 ***
    call InitAssaultGroup()
    call CampaignAttackerEx( 2, 3, 3, NAGA_REAVER )
    call CampaignAttackerEx( 0, 1, 2, NAGA_SNAP_DRAGON )
    call CampaignAttackerEx( 2, 3, 3, HIGH_SWORDMAN )
    call CampaignAttackerEx( 0, 1, 2, HIGH_ARCHER )
    call AddStandardUnitsToAttackWaveTheAlliance()
    call Sleep( M3 ) // Waits 3 minutes before attacking
    call LaunchAttack()

    //*** WAVE 2 ***
    call InitAssaultGroup()
    call CampaignAttackerEx( 2, 3, 3, NAGA_REAVER )
    call CampaignAttackerEx( 0, 1, 2, NAGA_SNAP_DRAGON )
    call CampaignAttackerEx( 2, 3, 3, HIGH_SWORDMAN )
    call CampaignAttackerEx( 0, 1, 2, HIGH_ARCHER )
    call AddStandardUnitsToAttackWaveTheAlliance()
    call Sleep( M2 ) // Waits 2 minutes before attacking
    call LaunchAttack()

    //*** WAVE 3 ***
    call InitAssaultGroup()
    call CampaignAttackerEx( 3, 4, 4, NAGA_REAVER )
    call CampaignAttackerEx( 1, 2, 3, NAGA_SNAP_DRAGON )
    call CampaignAttackerEx( 3, 4, 4, HIGH_SWORDMAN )
    call CampaignAttackerEx( 1, 2, 3, HIGH_ARCHER )
    call AddStandardUnitsToAttackWaveTheAlliance()
    call Sleep( M1 ) // Waits 1 minute before attacking
    call LaunchAttack()

    //*** WAVE 4 ***
    call InitAssaultGroup()
    call CampaignAttackerEx( 3, 4, 4, NAGA_REAVER )
    call CampaignAttackerEx( 1, 2, 3, NAGA_SNAP_DRAGON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_MYRMIDON )
    call AddStandardUnitsToAttackWaveTheAlliance()
    call Sleep( M2 ) // Waits 2 minutes before attacking
    call LaunchAttack()

    //*** WAVE 5 ***
    call InitAssaultGroup()
    call CampaignAttackerEx( 3, 4, 4, NAGA_REAVER )
    call CampaignAttackerEx( 1, 2, 3, NAGA_SNAP_DRAGON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_MYRMIDON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_TURTLE )
    call AddStandardUnitsToAttackWaveTheAlliance()
    call Sleep( M2 ) // Waits 2 minutes before attacking
    call LaunchAttack()

    //*** WAVE 6 ***
    call InitAssaultGroup()
    call CampaignAttackerEx( 3, 4, 4, NAGA_REAVER )
    call CampaignAttackerEx( 1, 2, 3, NAGA_SNAP_DRAGON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_MYRMIDON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_TURTLE )
    call CampaignAttackerEx( 2, 2, 3, NAGA_SIREN )
    call AddStandardUnitsToAttackWaveTheAlliance()
    call Sleep( M2 ) // Waits 2 minutes before attacking
    call LaunchAttack()

    //*** WAVE 7 ***
    call InitAssaultGroup()
    call CampaignAttackerEx( 3, 4, 4, NAGA_REAVER )
    call CampaignAttackerEx( 1, 2, 3, NAGA_SNAP_DRAGON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_MYRMIDON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_TURTLE )
    call CampaignAttackerEx( 2, 2, 3, NAGA_SIREN )
    call AddStandardUnitsToAttackWaveTheAlliance()
    call Sleep( M2 ) // Waits 2 minutes before attacking
    call LaunchAttack()

    //*** WAVE 8 ***
    call InitAssaultGroup()
    call CampaignAttackerEx( 3, 4, 4, NAGA_REAVER )
    call CampaignAttackerEx( 1, 2, 3, NAGA_SNAP_DRAGON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_MYRMIDON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_TURTLE )
    call CampaignAttackerEx( 2, 2, 3, NAGA_SIREN )
    call CampaignAttackerEx( 2, 2, 3, NAGA_COUATL )
    call AddStandardUnitsToAttackWaveTheAlliance()
    call Sleep( M2 ) // Waits 2 minutes before attacking
    call LaunchAttack()

    //*** WAVE 9 ***
    call InitAssaultGroup()
    call CampaignAttackerEx( 3, 4, 4, NAGA_REAVER )
    call CampaignAttackerEx( 1, 2, 3, NAGA_SNAP_DRAGON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_MYRMIDON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_TURTLE )
    call CampaignAttackerEx( 2, 2, 3, NAGA_SIREN )
    call CampaignAttackerEx( 2, 2, 3, NAGA_COUATL )

    call CampaignAttackerEx( 3, 4, 4, HIGH_SWORDMAN )
    call CampaignAttackerEx( 1, 2, 3, HIGH_ARCHER )
	call CampaignAttackerEx( 1, 2, 3, HIGH_ARCHER )
    call CampaignAttackerEx( 1, 2, 3, SPELL_BREAKER )
    call CampaignAttackerEx( 1, 2, 3, BLOOD_ELF_PRIEST )
	call CampaignAttackerEx( 1, 2, 3, SORCERESS )
    call CampaignAttackerEx( 2, 2, 3, HUMAN_DRAGON_HAWK )

    call AddStandardUnitsToAttackWaveTheAlliance()
    call Sleep( M2 ) // Waits 2 minutes before attacking
    call LaunchAttack()

    //*** WAVE 10 ***
    call InitAssaultGroup()
    call CampaignAttackerEx( 3, 4, 4, NAGA_REAVER )
    call CampaignAttackerEx( 1, 2, 3, NAGA_SNAP_DRAGON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_MYRMIDON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_TURTLE )
    call CampaignAttackerEx( 2, 2, 3, NAGA_SIREN )
    call CampaignAttackerEx( 2, 2, 3, NAGA_COUATL )
	call CampaignAttackerEx( 2, 2, 3, NAGA_ROYAL )

	call CampaignAttackerEx( 3, 4, 4, HIGH_SWORDMAN )
    call CampaignAttackerEx( 1, 2, 3, HIGH_ARCHER )
	call CampaignAttackerEx( 1, 2, 3, HIGH_ARCHER )
    call CampaignAttackerEx( 1, 2, 3, SPELL_BREAKER )
    call CampaignAttackerEx( 1, 2, 3, BLOOD_ELF_PRIEST )
	call CampaignAttackerEx( 1, 2, 3, SORCERESS )
    call CampaignAttackerEx( 2, 2, 3, HUMAN_DRAGON_HAWK )
	call CampaignAttackerEx( 2, 2, 3, BLOOD_ELF_LIEUTENANT )

    call AddStandardUnitsToAttackWaveTheAlliance()
    call Sleep( M2 ) // Waits 2 minutes before attacking
    call LaunchAttack()

    //*** WAVE 11 ***
    call InitAssaultGroup()
    call CampaignAttackerEx( 3, 4, 4, NAGA_REAVER )
    call CampaignAttackerEx( 1, 2, 3, NAGA_SNAP_DRAGON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_MYRMIDON )
    call CampaignAttackerEx( 1, 2, 3, NAGA_TURTLE )
    call CampaignAttackerEx( 2, 2, 3, NAGA_SIREN )
    call CampaignAttackerEx( 2, 2, 3, NAGA_COUATL )
	call CampaignAttackerEx( 2, 2, 3, NAGA_ROYAL )

	call CampaignAttackerEx( 3, 4, 4, HIGH_SWORDMAN )
    call CampaignAttackerEx( 1, 2, 3, HIGH_ARCHER )
	call CampaignAttackerEx( 1, 2, 3, HIGH_ARCHER )
    call CampaignAttackerEx( 1, 2, 3, SPELL_BREAKER )
    call CampaignAttackerEx( 1, 2, 3, BLOOD_ELF_PRIEST )
	call CampaignAttackerEx( 1, 2, 3, SORCERESS )
    call CampaignAttackerEx( 2, 2, 3, HUMAN_DRAGON_HAWK )
	call CampaignAttackerEx( 2, 2, 3, BLOOD_ELF_LIEUTENANT )

    call AddStandardUnitsToAttackWaveTheAlliance()
    call Sleep( M2 ) // Waits 2 minutes before attacking
    call LaunchAttack()

    loop //Init the infinite attack loop
		//*** WAVE 12 ***
		call InitAssaultGroup()

		// small ground army
		call CampaignAttackerEx( 2, 2, 2, NAGA_REAVER )
		call CampaignAttackerEx( 2, 2, 2, NAGA_SNAP_DRAGON )
		call CampaignAttackerEx( 2, 2, 2, NAGA_MYRMIDON )
		call CampaignAttackerEx( 2, 2, 2, NAGA_TURTLE )
		call CampaignAttackerEx( 2, 2, 2, NAGA_SIREN )
		call CampaignAttackerEx( 4, 4, 4, NAGA_ROYAL )

		call CampaignAttackerEx( 4, 4, 4, HIGH_SWORDMAN )
		call CampaignAttackerEx( 4, 4, 4, HIGH_ARCHER )
		call CampaignAttackerEx( 4, 4, 4, HIGH_ARCHER )
		call CampaignAttackerEx( 4, 4, 4, SPELL_BREAKER )
		call CampaignAttackerEx( 4, 4, 4, BLOOD_ELF_PRIEST )
		call CampaignAttackerEx( 4, 4, 4, SORCERESS )
		call CampaignAttackerEx( 4, 4, 4, BLOOD_ELF_LIEUTENANT )
		call CampaignAttackerEx( 4, 4, 4, BLOOD_ELF_WAGON )
		call CampaignAttackerEx( 4, 4, 4, BLOOD_ELF_BALLISTA )
		call CampaignAttackerEx( 4, 4, 4, BLOOD_ELF_CAGE )

		// big air army
		call CampaignAttackerEx( 7, 10, 12, NAGA_COUATL )

		call CampaignAttackerEx( 7, 10, 12, HUMAN_DRAGON_HAWK )

		call AddStandardUnitsToAttackWaveTheAlliance()
		call Sleep( M2 ) // Waits 2 minutes before attacking
		call LaunchAttack()
    endloop
endfunction

function main takes nothing returns nothing
    call CampaignAI( NAGA_CORAL, function ChooseHeroSkill )
    call ConfigureAI( )
    call InitHeroTheAlliance( )
	call StartThread(function UpdateWorkers)

    call BuildingStrategy( )

    call AttackWaves( )
endfunction
